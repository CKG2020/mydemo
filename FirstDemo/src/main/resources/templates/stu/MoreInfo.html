<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>完善信息</title>
    <link rel="stylesheet" type="text/css" href="http://unpkg.com/view-design/dist/styles/iview.css">
    <script type="text/javascript" src="http://vuejs.org/js/vue.min.js"></script>
    <script type="text/javascript" src="http://unpkg.com/view-design/dist/iview.min.js"></script>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body onload="f()">
<!--<h1>SUCCESS!</h1>-->
<div id="app">
<!--    {{message}}-->
    <div class="layout">
        <layout :style="{minHeight: '100vh'}">
            <sider collapsible :collapsed-width="78" v-model="isCollapsed">
                <i-menu theme="dark" width="auto" :class="menuitemClasses">
                    <menu-item name="1-1">
                        <icon type="ios-navigate"></icon>
                        <span>完善信息</span>
                    </menu-item>
                </i-menu>
            </sider>
            <layout>
                <i-header :style="{background: '#fff', boxShadow: '0 2px 3px 2px rgba(0,0,0,.1)'}">
                    <div style="float: left;margin-left: 70%">
                        <h1>欢迎您 ! &nbsp;&nbsp; {{message}}</h1>
                    </div>
                        <a href="/Login" style="margin-left: 50px"> 注销</a>

                </i-header>
                <i-content :style="{padding: '0 16px 16px'}">
                    <breadcrumb :style="{margin: '16px 0'}">
                        {{info}}
                    </breadcrumb>
                    <card>
                        <div style="height: 600px">Content</div>
                    </card>
                </i-content>
            </layout>
        </layout>
    </div>
</div>

<script>
    function f(){
        $.ajax({
            url:'/search',
            type:'get',
            success(res) {
                let msg=JSON.stringify(res);
                msg=$.parseJSON(msg);
                if(res.sname===null){
                    active("新用户!","请完善你的个人信息");
                }else{
                    active(msg.sname);
                }
            }
        })
    }

    function active(res,ss) {
        let ap = new Vue({
            el:'#app',
            data(){
                return{
                    message:res,
                    info:ss,
                    isCollapsed: false,
                    formItem: {
                        input: '',
                        select: '',
                        radio: 'male',
                        checkbox: [],
                        switch: true,
                        date: '',
                        time: '',
                        slider: [20, 50],
                        textarea: ''
                    }
                }
            },
            computed: {
                menuitemClasses: function () {
                    return [
                        'menu-item',
                        this.isCollapsed ? 'collapsed-menu' : ''
                    ]
                }
            }
        })
    }
</script>
</body>
</html>